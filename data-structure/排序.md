## 排序



#### 一、 基本概念和术语

> **排序的稳定性**：假设 ki=kj (1≦i≦n，1≦j≦n，i≠j)，且在排序前的序列中 ri领先于 rj (即 i<j)。 如果排序后 ri仍领先于rj，则称所用的排序方法是稳定的;反之，若可能使得排序后的序列中 rj 领先 ri，则称所用的排序方法是不稳定的。
>
> **内排序和外排序**: 根据在排序过程中待排序的记录是否全部被放置在内存中,排序分为:内排序和外排序 
>
> **内排序**性能主要受三个方面影响：
>
> * 时间性能：高效率的内排序算法应该是具有尽可能少的关键字比较次数和尽可能少的记录移动次数 
> * 辅助空间
> * 算法复杂度：指的是算法本身的复杂度，而不是指算法的时间复杂度
>
> 根据排序过程中借助的主要操作，我们把内排序分为:**插入排序、交换排序、选择排序和归并排序**。



```javascript
// 排序用到的结构
class Struct () {
  constructor (list) {
    this.tempList[list.length] // 用于储存要排序的数组
    this.temp //用作哨兵或者临时变量
    this.length // 记录顺序表长度
  }
}

function swap (list, pre, next) {
  let temp = list[pre]
  list[pre] = list[next]
  list[next] = temp
}
```



#### 二、 冒泡排序 Bubble Sort

> 一种交换排序，基本思想是，两两比较相邻记录的关键字，如果反序则交换，知道没有反序的记录为止
>
> 时间复杂度O(n²)

```javaScript
// 最简单排序实现
function BubbleSort_0 (list) {
  for (let i = 0; i < list.length; i++) {
    for (let j = i + 1; j < list.length; j++) {
    	if (list[i] > list[j]) {
        swap(list, i, j)
      }
  	}
  }
}

// 冒泡排序
function BubbleSort (list) {
  for (let i = 0; i < list.length; i++) {
    // 从后向前
    for (let j = list.length - 1; j > i ; j--) {
      if (list[j] < list[j-1]) {
        swap(list, j, j-1)
      }
    }
  }
}

// 冒泡排序改进
function BubbleSort_adv (list) {
  let flag = true
  for (let i = 0; i < list.length && flag; i++) {
    flag = false
    
    // 从后向前
    for (let j = list.length - 1; j > i ; j--) {
      if (list[j] < list[j-1]) {
        swap(list, j, j-1)
        flag = true //如果有数据交换，则 flag 为 true
      }
    }
  }
}
```



#### 三、 简单选择排序 Simple Selection Sort

> 通过n-i次关键字的比较，从n-i+1个记录中选出关键字最小的记录，并和第i个（1 ≦ i ≦ n）记录交换
>
> 时间复杂度O(n²)，性能上略优于冒泡排序(移动少)

```javascript
function SelectSort (list) {
  for (let i = 0; i < list.length; i++) {
    let minIdx = i
    for (let j = i+1; j < list.length; j++) {
      if (list[minIdx] > list[j]) {
        minIdx = j
      }
    }
    
    if (i !== minIdx) {
      swap(list, i, minIdx)
    }
  }
}
```



#### 四、 直接插入排序 Straight Insertion Sort

> 将一个记录插入到已经排好序的有序表中，从而得到一个新的，记录数增加1的有序表
>
> 时间复杂度O(n²)，性能上略优于前两者

```javascript
function InsertSort (list) {
  for (let i = 1; i < list.length; i++) {
    if (list[i] < list[i-1]) {
      let temp = list[i]
      let j
      for (j = i-1; list[j] > temp; j--) {
        list[j+1] = list[j] //记录后移
      }
      
      list[j+1] = temp
    }
  }
}
```



#### 五、 希尔排序